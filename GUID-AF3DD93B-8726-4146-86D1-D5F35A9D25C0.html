<!DOCTYPE html>
<html lang="EN-US"><head data-approot=""><!-- saved from url=(0014)about:internet --><meta http-equiv="X-UA-Compatible" content="IE=edge, chrome=1" />
<meta charset="utf-8" /><meta name="viewport" content="initial-scale=1, maximum-scale=1" /><meta name="viewport" content="width=device-width, initial-scale=1" /><meta content="(C) Copyright 2005" name="copyright" /><meta content="(C) Copyright 2005" name="DC.rights.owner" /><meta content="concept" name="DC.Type" /><meta content="Updating the Data Repository with Final Decision Data" name="DC.Title" /><meta content="At runtime, the Process Server sends XML transaction data to the DSS. The FinalApplicationDecision is the final application decision of the calling system (as opposed to the application decision recommended by the Decision Module)." name="abstract" /><meta content="At runtime, the Process Server sends XML transaction data to the DSS. The FinalApplicationDecision is the final application decision of the calling system (as opposed to the application decision recommended by the Decision Module)." name="description" /><meta content="DSS, SQL statements, data repository, reporting, final application decision, repositories, data" name="DC.subject" /><meta content="DSS, SQL statements, data repository, reporting, final application decision, repositories, data" name="keywords" /><meta content="GUID-212B2454-8D33-404B-AF81-FD175D020F45.html" name="DC.Relation" scheme="URI" /><meta content="GUID-BBC5688F-CD07-42E7-A831-AF0CBDD2D123.html" name="DC.Relation" scheme="URI" /><meta content="XHTML" name="DC.Format" /><meta content="GUID-AF3DD93B-8726-4146-86D1-D5F35A9D25C0" name="DC.Identifier" /><meta content="EN-US" name="DC.Language" /><title>Updating the Data Repository with Final Decision Data</title><link href="static/screen.css?CpZb8t6v" rel="stylesheet" /><link href="static/print.css?EupNBz/e" media="print" rel="stylesheet" /><link rel="icon" href="static/favicon.ico" sizes="16x13" type="image/x-icon"/><script src="static/head.js?p2mB0fzf" type="text/javascript">           </script></head><body class="fixed" id="GUID-AF3DD93B-8726-4146-86D1-D5F35A9D25C0"><div class="navbar navbar-default navbar-fixed-top" role="navigation"><div class="container-fluid"> <div class="row row-offcanvas row-offcanvas-left" id="header"> <div class="col-md-3 col-md-push-9 sidebar-offcanvas" id="search_form_container"><form class="navbar-form" id="search_form" role="search"><div class="input-group"><input class="form-control" id="search_textbox" type="text" placeholder="Enter search terms"><div class="input-group-btn"><button class="btn btn-default" type="submit"><span class="glyphicon glyphicon-search"></span></button></div></input></div></form></div><div class="col-md-3 col-md-pull-3" id="logo_container"><button class="visible-xs visible-sm navbar-toggle pull-left" data-toggle="offcanvas"><span class="icon-bar"></span><span class="icon-bar"></span><span class="icon-bar"></span></button><a href="index.html"><img id="logo" alt="logo" src="static/logo.png" /></a></div><div class="col-md-6 col-md-pull-3 hidden-xs hidden-sm" id="pubtitle_container"><div id="pubtitle">Origination Manager Help</div></div></div></div></div><div class="container-fluid"><div class="row row-offcanvas row-offcanvas-left"><div class="col-md-3 sidebar-offcanvas" id="leftbar"><div class="panel-group" id="accordion"><div class="panel panel-default" id="toc_container"><div class="panel-heading"><h4 class="panel-title"><a data-toggle="collapse" data-parent="#accordion" href="#toc_pane"><span>Contents</span></a></h4></div><div class="panel-collapse collapse" id="toc_pane" data-breadcrumbtext="BreadCrumb TOC"><div class="panel-body"><nav id="toc_nav"></nav></div></div></div><div class="panel panel-default" id="index_container"><div class="panel-heading"><h4 class="panel-title"><a data-toggle="collapse" data-parent="#accordion" href="#index_pane"><span>Index</span></a></h4></div><div class="panel-collapse collapse" id="index_pane" data-breadcrumbtext="BreadCrumb Index"><div class="panel-body"><nav id="index_nav"></nav></div></div></div><div class="panel panel-default" id="glossary_container"><div class="panel-heading"><h4 class="panel-title"><a data-toggle="collapse" data-parent="#accordion" href="#glossary_pane"><span>Glossary</span></a></h4></div><div class="panel-collapse collapse" id="glossary_pane" data-breadcrumbtext="BreadCrumb Glossary"><div class="panel-body"><nav id="glossary_nav"></nav></div></div></div><div class="panel panel-default" id="search_container"><div class="panel-heading"><h4 class="panel-title"><a data-toggle="collapse" data-parent="#accordion" href="#search_pane"><span>Search Results</span><span class="badge pull-right" id="search_count"></span></a></h4></div><div class="panel-collapse collapse" id="search_pane" data-breadcrumbtext="BreadCrumb Search"><div class="panel-body"><nav id="search_nav"><div id="search_message">No search has been performed.</div></nav></div></div></div></div></div><div class="col-md-9" id="center"><div id="toolbar"><a id="button_back" href="#" title="Previous topic"><span class="fico-iconcircle-left4"></span></a><a id="button_forward" href="#" title="Next topic"><span class="fico-iconcircle-right4"></span></a><a id="button_highlighting" href="#" title="Toggle Highlighting"><span class="fico-iconpencil"></span></a><a id="button_print" href="#" title="Print"><span class="fico-iconprint-one"></span></a></div><div class="btn-group btn-breadcrumb" id="breadcrumbs"> <a class="btn btn-default" id="crumb_home" href="index.html" title="Home"><i class="glyphicon toc_pane_img" id="crumb_home_image">   </i><span id="crumb_home_text">Home</span></a><div class="crumb btn btn-default" id="crumb_tooltip">...</div></div><article><noscript><p>JavaScript must be enabled in order to use this site.</p><p>Please enable JavaScript in your browser and refresh the page.</p></noscript><div id="thumbnailDialog"></div>

<h1 class="title topictitle1">Updating the Data Repository with Final Decision Data</h1>
<div class="body conbody"><div class="abstract"> 
	  <span class="shortdesc">At runtime, the 
		<span class="ph" id="GUID-D37A3C19-3D5D-4A1F-BE38-AC363C3FAE97_unique_5">Process Server</span> sends XML transaction data to the 
		<span class="ph" id="GUID-86AA06AC-78A2-4CE5-A63F-D2C926531EB8_unique_3">DSS</span>. The 
		<samp class="ph codeph">FinalApplicationDecision</samp> is the final application decision of the calling system (as opposed to the application decision recommended by the 
		<span class="ph" id="GUID-48AF3303-C343-48CC-A51D-5B18D322514E_unique_79">Decision Module</span>). 
	 </span>
This data is not provided by the 
	 <span class="ph" id="GUID-48AF3303-C343-48CC-A51D-5B18D322514E_unique_79">Decision Module</span> and must be provided by the calling system. 
  </div>
 
	 <p class="p" id="GUID-AF3DD93B-8726-4146-86D1-D5F35A9D25C0__WP1166799">You may wish to add this data to the data repository used by the 
		<span class="ph" id="GUID-AF3DD93B-8726-4146-86D1-D5F35A9D25C0__GUID-86AA06AC-78A2-4CE5-A63F-D2C926531EB8_unique_3">DSS</span> for use in reports. This section contains some sample SQL 
		<samp class="ph codeph">UPDATE</samp> statements that you can modify and use to update the data repository reporting tables. 
	 </p>
 
	 <table><tr><td align="center" valign="top"><div class="notegraphic"><img src="static/note.png" /></div></td><td valign="top"><div class="note" id="GUID-AF3DD93B-8726-4146-86D1-D5F35A9D25C0__GUID-0D9F6F46-213B-4765-A10F-8D7FC179D5DA"><b>Note</b> In the SQL statements, the phrase 
		<samp class="ph codeph">WHERE tran.SystemId = &#39;sysid&#39;</samp> specifies the 
		<span class="ph" id="GUID-AF3DD93B-8726-4146-86D1-D5F35A9D25C0__GUID-48AF3303-C343-48CC-A51D-5B18D322514E_unique_79">Decision Module</span> rule service addressed by the application. If tenants are implemented for the 
		<span class="ph" id="GUID-AF3DD93B-8726-4146-86D1-D5F35A9D25C0__GUID-48AF3303-C343-48CC-A51D-5B18D322514E_unique_79">Decision Module</span>, replace 
		<samp class="ph codeph"><em class="ph i">sysid</em></samp> with a tenant code. If tenants are not implemented, there is only one rule service, and no special authority is required to execute these SQL statements. However, in a multi-tenant environment, each rule service is associated with a different tenant, and only a tenant administrator, who is authorized to view data for multiple tenants, should execute the statements. 
	 </div></td></tr></table>
 
	 <p class="p" id="GUID-AF3DD93B-8726-4146-86D1-D5F35A9D25C0__WP1166772"> Each time an application is submitted for processing, a timestamped 
		<samp class="ph codeph">DATransaction</samp> record and a number of 
		<samp class="ph codeph">DecisionFlowHistory</samp> records are added for the application to the data repository. 
	 </p>
 
	 <div class="p" id="GUID-AF3DD93B-8726-4146-86D1-D5F35A9D25C0__WP1166619">One option is to update the 
		<samp class="ph codeph">DecisionFlowHistory</samp> for the decision associated with the 
		<em class="ph i">latest</em> transaction processed for the application: 
		<pre class="pre codeblock">UPDATE decisionflowhistory1 AS target
    INNER JOIN (
    SELECT tran.hncid, dfh.hncid AS dfhid, superid 
    FROM datransaction_1 AS tran 
        inner join decisionflowhistory_1 AS dfh ON tran.hncid = 
        dfh.superid 
    WHERE tran.SystemId = &#39;sysid&#39; 
        AND tran.ApplicationCrossReferenceId = &#39;APPREF&#39;
        AND dfh.ProductCode = &#39;PRODUCT&#39;
        AND dfh.DecisionFlowName = &#39;DECISONFLOW&#39;
        AND dfh.ProductCategory = &#39;CATEGORY&#39;
    ORDER BY ProcessingTimestamp DESC 
    LIMIT 1
    ) AS source ON source.dfhid = target.hncid 
      AND source.superid = target.superid
    SET FinalDecisionResult = &#39;XXXXXX&#39;;</pre>
 
	 </div>
 
	 <div class="p" id="GUID-AF3DD93B-8726-4146-86D1-D5F35A9D25C0__WP1166637">Alternatively, you can update the final decision for all occurrences of the 
		<samp class="ph codeph">DecisionFlowHistory</samp>: 
		<pre class="pre codeblock">UPDATE decisionflowhistory_1 INNER JOIN datransaction1 ON datransaction_1.hncid = 
decisionflowhistory_1.superid
    SET FinalDecisionResult = &#39;XXXXX&#39;
    WHERE datransaction_1.SystemId = &#39;sysid&#39; 
        AND datransaction_1.ApplicationCrossReferenceId = &#39;REF&#39;
        AND decisionflowhistory_1.ProductCode = &#39;PROD&#39;
        AND decisionflowhistory_1.DecisionFlowName = &#39;DECISIONFLOW&#39;
        AND decisionflowhistory_1.ProductCategory = &#39;CATEGORY&#39;;</pre>
 
	 </div>
 
	 <table><tr><td align="center" valign="top"><div class="notegraphic"><img src="static/note.png" /></div></td><td valign="top"><div class="note" id="GUID-AF3DD93B-8726-4146-86D1-D5F35A9D25C0__WP1166748"><b>Note</b> Substitute values for 
		<samp class="ph codeph">SystemId</samp>, 
		<samp class="ph codeph">ApplicationCrossReferenceId</samp>, 
		<samp class="ph codeph">ProductCode</samp>, 
		<samp class="ph codeph">ProductCategory</samp>, 
		<samp class="ph codeph">FinalDecisionResult</samp>, and 
		<samp class="ph codeph">DecisionFlowName</samp> as appropriate. 
	 </div></td></tr></table>
 
	 <table><tr><td align="center" valign="top"><div class="notegraphic"><img src="static/note.png" /></div></td><td valign="top"><div class="note" id="GUID-AF3DD93B-8726-4146-86D1-D5F35A9D25C0__GUID-D572A57F-89EF-4D85-9322-ADCB8405285E"><b>Note</b> Values for 
		<samp class="ph codeph">FinalDecisionResult</samp> can be 
		<samp class="ph codeph">Accept</samp> or 
		<samp class="ph codeph">Decline</samp> for use in reports. 
	 </div></td></tr></table>
 
  </div>
<div class="related-links">
<strong>Covered Topics</strong><ul class="ullinks">
<li class="link ulchildlink"><strong><a href="GUID-BBC5688F-CD07-42E7-A831-AF0CBDD2D123.html"><span class="ph" id="GUID-86AA06AC-78A2-4CE5-A63F-D2C926531EB8_unique_4">DSS</span> Update Queries</a></strong><br />
In addition to updating the final decision, you must use 
		<span class="ph" id="GUID-86AA06AC-78A2-4CE5-A63F-D2C926531EB8_unique_4">DSS</span> update queries to update the analyst and override codes for the Override Tracking Report and update the final offer for the Pricing Decision Analysis Report. 
	 </li>
</ul>

<div class="familylinks">
<div class="parentlink"><strong>Parent Topic</strong> <a class="link" href="GUID-212B2454-8D33-404B-AF81-FD175D020F45.html" title="This section provides information on various Decision Module decision flow components and their relation to the Decision Module domain model and transaction data.">Transaction Data and Decisioning</a></div>
</div>

</div>
</article></div></div></div><script src="static/body.js?q4HemM8O" type="text/javascript"></script></body></html>
